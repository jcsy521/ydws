# -*- coding: utf-8 -*-
import socket
import select
import time
import thread
import logging
import base64

from tornado.ioloop import IOLoop

from dotdict import DotDict
from base import BaseParser

def test():
    print 'come into'
    s= socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

    # jiaxiaolei's 
    #s.connect(('192.168.1.9', 10025))
    ## ichebao 
    #s.connect(('192.168.1.5', 10025))
    # for jiaxiaolei's gateway
    s.connect(('192.168.1.5', 10028))
    #s.connect(('192.168.1.9', 10025))
    # part 1: get packet_
    t = int(time.time())
    sessionid = '7k8o54tw'
    tid = 'jxl1111111'


    mg = '[1388466395,7k8o54tw,1,1.0.0,jxl1111111,T11,{E,116.424,N,39.918,120.3,270.5,1388466386,31}]'
    mg= '[%s,%s,3,1.5,%s,T11,{E,113.54598,N,22.43775,9.0,0.0,1390293480,0:0:0:0:0}]' % ( t, sessionid, tid )
    mg= '[%s,%s,3,1.5,%s,T11,{E,113.54598,N,22.43775,9.0,0.0,1390293480,11},{E,113.54598,N,22.43775,9.0,0.0,1390293480}]' % ( t, sessionid, tid )
    #mg = '[1390293481,7k8o54tw,3,1.5,jxl1111111,T11,{E,113.54598,N,22.43775,9.0,0.0,1390293480,20}]'

    #mg = '[1390293480,7k8o54tw,3,1.5,jxl1111111,T11,{E,113.54598,N,22.43775,9.0,0.0,1390293480,0:0:0:0:0}]'
    #mg = '[1388466390,6sa8xn8a,1,1.0.0,jxl1111111,T11,{E,116.424,N,39.918,120.3,270.5,1388466386,31},{E,118.424,N,39.918,120.3,270.5,1388466386,32},{E,116.424,N,39.918,120.3,270.5,1388466386,33}]'
    #mg = '[1388466394,6sa8xn8a,1,1.0.0,jxl1111111,T11,{E,116.424,N,39.918,120.3,270.5,1388466386},{E,118.424,N,39.918,120.3,270.5,1388466386,32},{E,116.424,N,39.918,120.3,270.5,1388466386,33}]'
    #mg = 'jia'
    #mg = 'jia'

    #mg =  '[%s,%s,1,2.0.2,%s,T23,1,1,0:9:74,]' % (t,sessionid,tid)
    #mg =  '[%s,%s,1,2.0.2,%s,T23,1,1,0:9:74,-1,1]' % (t,sessionid,tid)

    mg = '[1398422482,ih26tvxb,3,2.6.11,CBBJTEAM01,T15,4,*,0.00000,*,0.00000,0.0,0.0,0,460:0:4544:28748,0:9:94,0,1,]'
    #mg = '[%s,e3qy8qei,3,2.6.11,T123SIMULATOR,T15,4,*,0.00000,*,0.00000,0.0,0.0,0,460:0:4544:28748,0:9:94,0,1,]' % t
    #mg = '[%s,c0ebqn4w,3,2.6.11,T123SIMULATOR,T15,4,e,113.43273,n,22.37589,0.8,0.0,0,460:0:9700:49787,24:9:80,1399260073,1,]' % t
    #mg = '[%s,v7riw1jk,3,2.6.11,T123SIMULATOR,T15,4,*,0.00000,*,0.00000,0.0,0.0,0,460:0:4544:28748,0:9:94,0,1,]' % t
    #mg = '[%s,zql303bl,3,2.3.10,T123SIMULATOR,T11,{E,114.03165,N,22.73620,45.3,308.9,1399290505},{E,114.02869,N,22.74009,19.3,340.8,1399290548},{E,114.02937,N,22.74052,0.8,0.0,1399290609}]' % t
    mg = '[%s,67vepklz,3,2.3.10,T123SIMULATOR,T11,{E,114.03165,N,22.73620,45.3,308.9,%s},{E,114.02869,N,22.74009,19.3,340.8,%s},{E,114.02937,N,22.74052,0.8,0.0,%s}]' % (t, t+1, t+2, t+3)
    #mg = '[1399290620,e3qy8qei,3,2.3.10,T123SIMULATOR,T11,{E,114.03165,N,22.73620,45.3,308.9,1399290515},{E,114.02869,N,22.74009,19.3,340.8,1399290548},{E,114.02937,N,22.74052,0.8,0.0,1399290799}]' 

    mg = '[%s,ym6lzliq,3,2.6.11,T123SIMULATOR,T15,4,*,0.00000,*,0.00000,0.0,0.0,0,460:0:4544:28748,0:9:94,0,1,]' % t

    mg = '[%s,21xj7o7z,3,3.2.ZJ200_1.5113,T123SIMULATOR,T17]' % t

    mg = '[2,1414944000, ,460000000000000,T1,330A0000CB,3.0,protocol,B1,3:2]'

    s.send(mg)
    res =  s.recv(1024)
    print '-----', res, type(res), repr(res)
       
if __name__ == "__main__":   
    test()
